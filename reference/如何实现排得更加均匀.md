## 从着色问题出发

搜到了蚁群算法，还算好理解的。<https://www.cnblogs.com/zhuangzi101/p/10780279.html>

大致的理解是，涂色问题，就像图的BFS搜索的顺序展开，每一个点涂色在不冲突的条件下优先选择以前用过的颜色，如果不能满足，那就用一种新的颜色。

这样的方法先选择哪个邻接点涂色会影响最后的结果，这个算法就是找一个**好的路径**来实现**涂色颜色数量逐渐减少**。

模仿蚂蚁在觅食过程中能够在其经过的路径上留下一种称为**信息素**的物质，并在觅食过程中能够感知这种物质的**强度**，并指导自己**行动的方向**，它们总是朝着该物质强度高的方向移动，这就形成一种类似正反馈的机制，这样经过一段时间后，整个蚁群就会沿着最短路径到达食物源了。

反映在算法中，就是设置每两个相连的点之间有**移动概率值**，每次赋一种颜色之后，会影响概率。

![image-20210423175204874](C:\Users\HY\AppData\Roaming\Typora\typora-user-images\image-20210423175204874.png)

然后多迭代几次就能有更好的效果。

然鹅，这个逐步选路然后让颜色数量变少好像跟我们的目标略有不同。。。

## Great Deluge Algorithm

参考文献：



**硬性条件**：同一学生选的课时间不能冲突。

**软条件**：时间尽量均匀。



**问题转化成图着色问题**

每一个点是一门课程，

$c_{ij}$ 表示$i$和 $j$  课程同时选的人数。

$x_i$ 表示选 $i$ 课程的人。

$t_i$ 表示某一时间段。

$cij>0$ 的边的两个顶点需要填上不同的颜色，也即是赋上不同的$t_k$。

目标是要满足硬性条件下，软条件较优，也即损失函数越小。



 ### 如何实现衡量排得更加均匀

- 详细的来讲：对于考试少的同学，可能2,3天的间隔是合适的，拖太久也不好，对于考试多（超过7）的同学来说，1,2天或许是最好的。但如果针对每个同学来算损失函数的话，数据的存储，更新都较麻烦，下一步或许考虑

- 采用论文中的衡量办法。两门冲突的考试就会有一个损失，时间间隔越短，损失越大，并且乘上这两节考试冲突的人数做权重。大体上衡量了同一人的两门考试的时间间隔。

  

## 形式化：

![image-20210422220941174](C:\Users\HY\AppData\Roaming\Typora\typora-user-images\image-20210422220941174.png)



## 图启发时的策略

LD：这门课有越多的冲突，就先排这门课。也就是和这门考试冲突的考试门数多。

> Largest degree (LD): This technique orders the
> examination on the basis of largest number of conflicting
> examinations.

LWD：先选这门考试里冲突的学生多的，也就是邻边上的权重和大的。

> 1. • Largest weighted degree (LWD): This heuristic order the
>    exams based on the number of students in conflict. That
>    is, schedule exams with most number of students who
>    are involved in the conflict.

LE：选择门课的学生多的先排

> • Largest enrolment (LE): Here exams with the largest
> number of registered students are scheduled first.

SD：饱和度。可以选择的时间段少的考试，有先排的优先级。

> • Saturation degree (SD): The exams are ordered based on
> the number of remaining timeslots; exams with the least
> number of available periods in the timetable are given
> higher priority to be selected for scheduling  

论文里说，我们用SE,LWD,LE来启发式算法。如果需要动态调整采用SD的规则。

### 具体实现

**第一步：找到一个初始的可行解**

采用SE（或者LWD,LE）来排序，先给这些点填色，在满足不冲突的条件下优先选择序号较小的颜色



**第二大洪水算法**

![image-20210422235019868](C:\Users\HY\AppData\Roaming\Typora\typora-user-images\image-20210422235019868.png)

大致是说，有一个初始边界值B，和一个期望值D，然后有一个下降速率，可以是一些函数，比如$\beta = B-D/I$，$I$是迭代次数。也可以是一个其他的固定值。

然后每次损失函数小于这个边界值的时候，边界值就会减小；如果不满足，边界值可能会增大。然后一步步迭代。直到迭代次数用完，或者达到了期望值，就算完成了安排。

:sweat:

然后每次迭代会有几种方式：

- 从一个时间段的随机考试换到到一个不同的时间段(N1)，
- 随机交换两个选定的考试(N2)
- 在两个随机选择的时间段(N3)之间交换所有考试。



问题：

**问题**

1、关于颜色

数量应该是尽量少？还是要接近我们的时间段数量。

如果没有满我们的时间段数量，是否要填满。我们的时间段数量应该定为多少。

；如果填满的话，是在给初始解的时候填满还是在后面的变更中。

如果第一步初始解的颜色数大于可选择的时间段数，如何处理。

2、关于大洪水算法

感觉还是在盲目地试，每一次改变并不是一定就能得到更好的效果，所以迭代方式可能需要更新。

3、关于损失函数

问题：

- 只是一个总体上的估计，不能确定连续两个时间段就一定不会有冲突考试。
- 不是计算的一位同学相邻两次考试的时间间隔，实际目标会有偏差。

思考的方向：

​	尽可能体现均衡，然后希望把损失函数做成一种矩阵的运算。

## 然后

代码还没写

## 还有一些想说的

找到了一个比赛的官网，比赛内容就是排时间表。有获奖者的报告（感觉没啥用），主要有一些题目数据，没有cac给的那么大，但可以试手，只是要多写一个io了。

有两个gitlab仓库，说的是课程安排的程序，还有大洪水算法，但是我下载之后各种报错，运行不了。可以去了解一下。
